<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSCE Dashboard (Host)</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root {
            --bg-color: #121212;
            --surface: #1e1e1e;
            --text: #ffffff;
            
            /* Phase Colors */
            --prep-color: #d97706;    /* Amber */
            --station-color: #059669; /* Green */
            --move-color: #2563eb;    /* Blue */
            --ready-color: #374151;   /* Grey */
            
            /* Extra Time Variants */
            --extra-prep: #7c2d12;    /* Dark Amber */
            --extra-station: #064e3b; /* Dark Green */
            
            /* States */
            --stop-color: #b91c1c;    /* Red */
            --standby-color: #0f172a; /* Dark Blue/Slate */
            --intermission-color: #111;
            
            --sidebar-bg: #111;
            --sidebar-border: #333;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            overflow: hidden;
        }

        /* --- SETUP SCREEN --- */
        #setup-view {
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            height: 100vh;
            overflow-y: auto;
        }

        .card {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        h2 { margin-top: 0; font-weight: 300; border-bottom: 1px solid #444; padding-bottom: 10px; }
        
        textarea {
            width: 100%;
            height: 120px;
            background: #2d2d2d;
            border: 1px solid #444;
            color: #fff;
            padding: 10px;
            font-family: monospace;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .control-group {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 6px;
        }

        .input-wrapper { display: flex; gap: 5px; }

        label { display: block; color: #aaa; font-size: 0.85rem; margin-bottom: 5px; }
        
        input[type="number"] {
            background: #333; border: 1px solid #555; color: white;
            padding: 8px; width: 100%; box-sizing: border-box; font-size: 1rem; flex-grow: 1;
        }

        select {
            background: #444; color: white; border: 1px solid #555;
            padding: 0 10px; cursor: pointer;
        }

        button {
            width: 100%; padding: 15px; background: #2563eb; color: white;
            border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 10px;
        }
        button:hover { background: #1d4ed8; }

        .summary-box {
            background: #2a2a2a; padding: 15px; border-left: 4px solid #f59e0b;
            margin-top: 15px; display: none;
        }

        /* --- DASHBOARD LAYOUT --- */
        #run-view {
            display: none;
            height: 100vh;
            width: 100vw;
            display: grid; 
            grid-template-columns: 20% 60% 20%; 
        }

        /* FIXED SIDEBAR LAYOUT */
        .sidebar {
            background: var(--sidebar-bg);
            border-right: 1px solid var(--sidebar-border);
            display: flex;
            flex-direction: column;
            height: 100vh; 
            overflow: hidden; 
        }
        .sidebar-right { border-right: none; border-left: 1px solid var(--sidebar-border); }

        .sidebar h3 {
            margin: 0;
            padding: 20px;
            text-transform: uppercase; 
            font-size: 1.2rem; 
            color: #888;
            border-bottom: 2px solid #444; 
            text-align: center;
            flex-shrink: 0;
            background: var(--sidebar-bg);
        }

        /* SCROLLABLE LIST CONTAINER */
        .student-list { 
            list-style: none; 
            padding: 10px; 
            margin: 0;
            flex-grow: 1;
            overflow-y: auto;
        }
        
        .student-list::-webkit-scrollbar { width: 8px; }
        .student-list::-webkit-scrollbar-track { background: #111; }
        .student-list::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        .student-list::-webkit-scrollbar-thumb:hover { background: #555; }

        .student-item {
            padding: 10px 12px;
            margin-bottom: 6px;
            background: #252525;
            border-radius: 4px;
            border-left: 6px solid #555; 
            font-size: 1rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        
        .group-tag { font-size: 0.75rem; font-weight: bold; text-transform: uppercase; padding: 2px 6px; border-radius: 4px; background: #444; color: #ddd; }

        .grp-red { border-left-color: #ef4444 !important; } .grp-red .group-tag { background-color: #ef4444; color: white; }
        .grp-blue { border-left-color: #3b82f6 !important; } .grp-blue .group-tag { background-color: #3b82f6; color: white; }
        .grp-green { border-left-color: #10b981 !important; } .grp-green .group-tag { background-color: #10b981; color: white; }
        .grp-yellow { border-left-color: #eab308 !important; } .grp-yellow .group-tag { background-color: #eab308; color: black; }

        .main-stage {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; transition: background-color 0.5s ease; position: relative;
        }

        #status-text { font-size: 5vw; font-weight: 800; text-transform: uppercase; margin: 0; line-height: 1; text-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        #timer { font-size: 15vw; font-weight: 700; line-height: 1; font-variant-numeric: tabular-nums; margin: 20px 0; }
        #info-bar { font-size: 1.5vw; background: rgba(0,0,0,0.4); padding: 10px 40px; border-radius: 50px; margin-top: 20px; color: rgba(255,255,255,0.9); }

        /* Phases */
        .mode-standby { background-color: var(--standby-color); }
        .mode-ready { background-color: var(--ready-color); }
        .mode-prep { background-color: var(--prep-color); }
        .mode-station { background-color: var(--station-color); }
        .mode-move { background-color: var(--move-color); }
        .mode-et-prep { background-color: var(--extra-prep); } 
        .mode-et-station { background-color: var(--extra-station); }
        .mode-intermission { background-color: var(--intermission-color); }
        .mode-done { background-color: var(--stop-color); }

        /* ACTION BUTTON */
        #action-btn {
            display: none; margin-top: 30px; font-size: 2rem; padding: 20px 60px;
            background: #2563eb; color: white; border: none; border-radius: 50px; cursor: pointer; animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        
        #controls { position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center; opacity: 0; transition: opacity 0.3s; }
        .main-stage:hover #controls { opacity: 1; }
        .btn-small { padding: 10px 20px; cursor: pointer; border:none; background:rgba(0,0,0,0.5); color:white; margin: 0 5px;}
        
        /* REMOTE CODE DISPLAY */
        #remote-banner {
            background: #111; border: 1px solid #333; padding: 15px; border-radius: 8px;
            margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;
        }
        #remote-code { font-family: monospace; font-size: 1.5rem; color: #3b82f6; font-weight: bold; letter-spacing: 2px; }
    </style>
</head>
<body>

    <div id="setup-view">
        
        <div id="remote-banner">
            <div>
                <strong>Remote Control</strong>
                <div style="font-size:0.8rem; color:#aaa;">Open <em>remote.html</em> on phone</div>
            </div>
            <div id="remote-code">Generating...</div>
        </div>

        <div class="card">
            <h2>1. Student Data</h2>
            <textarea id="paste-area" placeholder="ET     Noah    Bansal     Red&#10;        Nargis  Abarok     Green"></textarea>
            <button onclick="analyze()" style="background:#4b5563; margin-top:10px;">Analyze Cohorts</button>
            
            <div id="analysis-summary" class="summary-box">
                Found <strong id="count-et">0</strong> Extra Time & <strong id="count-std">0</strong> Standard students.<br>
                <ul>
                    <li><strong>Extra Time Flights:</strong> <span id="flight-et">0</span></li>
                    <li><strong>Standard Flights:</strong> <span id="flight-std">0</span></li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>2. Configuration</h2>
            <div class="config-grid">
                
                <div class="control-group">
                    <label>Preparation Time</label>
                    <div class="input-wrapper">
                        <input type="number" id="val-prep" value="1">
                        <select id="unit-prep"><option value="min" selected>Mins</option><option value="sec">Secs</option></select>
                    </div>
                </div>

                <div class="control-group">
                    <label>Station Time</label>
                    <div class="input-wrapper">
                        <input type="number" id="val-station" value="7">
                        <select id="unit-station"><option value="min" selected>Mins</option><option value="sec">Secs</option></select>
                    </div>
                </div>

                <div class="control-group">
                    <label>Move Time</label>
                    <div class="input-wrapper">
                        <input type="number" id="val-move" value="1">
                        <select id="unit-move"><option value="min" selected>Mins</option><option value="sec">Secs</option></select>
                    </div>
                </div>

                <div class="control-group">
                    <label>Lead-In (Start)</label>
                    <div class="input-wrapper">
                        <input type="number" id="val-leadin" value="10">
                        <select id="unit-leadin" disabled style="opacity:0.5"><option value="sec" selected>Secs</option></select>
                    </div>
                </div>

                <div class="control-group">
                    <label>Max Capacity (Students)</label>
                    <div class="input-wrapper"><input type="number" id="capacity" value="12"></div>
                </div>

                <div class="control-group">
                    <label>Stations per Circuit</label>
                    <div class="input-wrapper"><input type="number" id="stations-count" value="4"></div>
                </div>

            </div>
        </div>

        <button onclick="startExam()">LOAD EXAM</button>
    </div>

    <div id="run-view" style="display:none;">
        <div class="sidebar">
            <h3 id="lbl-left">Current Group</h3>
            <ul id="list-current" class="student-list"></ul>
        </div>
        <div class="main-stage" id="main-stage-bg">
            <div id="status-text">WELCOME</div>
            <div id="timer">--:--</div>
            <div id="info-bar">PLEASE WAIT</div>
            
            <button id="action-btn" onclick="nextSection()">BEGIN</button>

            <div id="controls">
                <button class="btn-small" onclick="togglePause()" id="btn-pause">Pause</button>
                <button class="btn-small" style="background:#ef4444" onclick="stopExam()">Exit</button>
            </div>
        </div>
        <div class="sidebar sidebar-right">
            <h3>Up Next</h3>
            <ul id="list-next" class="student-list"></ul>
        </div>
    </div>

    <script>
        // --- PEERJS REMOTE SETUP ---
        const peer = new Peer();
        let peerId = null;

        peer.on('open', (id) => {
            // Generate a 4-char code derived from the full ID or random
            // Since we can't force the ID easily without a server, we use a random suffix
            // Strategy: We create a custom ID 'osce-dash-' + random 4 chars
            // Wait, we can try to destroy this peer and create a new one with custom ID
            // Or simpler: generate the ID string first.
        });

        // RE-INIT with Custom ID
        const randomCode = Math.random().toString(36).substring(2, 6).toUpperCase();
        const customPeer = new Peer("osce-dash-" + randomCode);

        customPeer.on('open', (id) => {
            document.getElementById('remote-code').innerText = randomCode;
            console.log("Host ID:", id);
        });

        customPeer.on('connection', (conn) => {
            console.log("Remote Connected");
            conn.on('data', (data) => {
                console.log("CMD:", data);
                if (data === 'CLICK') {
                    // Triggers the big action button (Next/Begin)
                    if (document.getElementById('action-btn').style.display !== 'none') {
                        nextSection();
                    } else if (currentStepIndex > 0) {
                        // Optional: Allow 'Click' to skip phases? 
                        // Safer to only allow it when the button is visible (Intermission/Standby)
                    }
                }
                if (data === 'PAUSE') {
                    togglePause();
                }
            });
        });

        customPeer.on('error', (err) => {
            if(err.type === 'unavailable-id') {
                // If ID taken (rare), reload for new one
                location.reload();
            }
            console.error(err);
        });


        // --- DASHBOARD LOGIC ---
        let etStudents = [];
        let stdStudents = [];
        let schedule = []; 
        let currentStepIndex = 0;
        let timerInterval = null;
        let timeLeft = 0;
        let isPaused = false;
        let capacity = 12;

        function getSeconds(valId, unitId) {
            const elVal = document.getElementById(valId);
            const elUnit = document.getElementById(unitId);
            if(!elVal || !elUnit) return 0;
            const val = parseFloat(elVal.value) || 0;
            const unit = elUnit.value; 
            return unit === 'min' ? val * 60 : val;
        }

        function analyze() {
            try {
                const raw = document.getElementById('paste-area').value;
                const lines = raw.split('\n');
                capacity = parseInt(document.getElementById('capacity').value) || 12;

                etStudents = [];
                stdStudents = [];
                const etTriggers = ['et', 'yes', '25', '25%', 'extra', 'y'];
                const colorTriggers = ['red', 'blue', 'green', 'yellow'];

                lines.forEach(line => {
                    const rawTokens = line.replace(/\r/g, '').split('\t').map(t => t.trim());
                    if (rawTokens.join('').length === 0) return;

                    let group = "Unknown";
                    let groupIndex = -1;

                    for (let i = rawTokens.length - 1; i >= 0; i--) {
                        const txt = rawTokens[i].toLowerCase();
                        if (colorTriggers.some(c => txt.includes(c))) {
                            group = rawTokens[i]; groupIndex = i; break;
                        }
                    }

                    let isExtra = false;
                    let nameStart = 0;
                    const firstCol = rawTokens[0].toLowerCase();
                    const isTrigger = etTriggers.includes(firstCol) || firstCol.startsWith('25%');

                    if (isTrigger) { isExtra = true; nameStart = 1; } 
                    else if (firstCol === "") { isExtra = false; nameStart = 1; } 
                    else { isExtra = false; nameStart = 0; }

                    const nameEnd = (groupIndex > -1) ? groupIndex : rawTokens.length;
                    let nameParts = rawTokens.slice(nameStart, nameEnd).filter(n => n.length > 0);
                    const fullName = nameParts.join(' ');

                    if (groupIndex === -1 && rawTokens.length > 0) {
                         const validTokens = rawTokens.filter(t => t.length > 0);
                         if(validTokens.length > 1) group = validTokens[validTokens.length-1];
                    }

                    const studentObj = { name: fullName, group: group };
                    if (isExtra) etStudents.push(studentObj);
                    else stdStudents.push(studentObj);
                });

                const etFlights = Math.ceil(etStudents.length / capacity);
                const stdFlights = Math.ceil(stdStudents.length / capacity);

                document.getElementById('analysis-summary').style.display = 'block';
                if(document.getElementById('count-et')) document.getElementById('count-et').innerText = etStudents.length;
                if(document.getElementById('count-std')) document.getElementById('count-std').innerText = stdStudents.length;
                if(document.getElementById('flight-et')) document.getElementById('flight-et').innerText = etFlights;
                if(document.getElementById('flight-std')) document.getElementById('flight-std').innerText = stdFlights;

                return { etFlights, stdFlights };
            } catch (err) {
                alert("Error in Analyze: " + err.message);
                return { etFlights: 0, stdFlights: 0 };
            }
        }

        function startExam() {
            try {
                if (!document.getElementById('stations-count')) throw new Error("Missing inputs.");
                
                const counts = analyze(); 
                
                const basePrep = getSeconds('val-prep', 'unit-prep');
                const baseStation = getSeconds('val-station', 'unit-station');
                const baseMove = getSeconds('val-move', 'unit-move');
                const leadIn = parseFloat(document.getElementById('val-leadin').value) || 10;
                const stationsCount = parseInt(document.getElementById('stations-count').value) || 4;

                const etPrep = basePrep * 1.25;
                const etStation = baseStation * 1.25;

                schedule = [];

                // 1. STANDBY
                schedule.push({ 
                    type: 'STANDBY', 
                    phase: 'WAIT', 
                    duration: 0, 
                    label: 'WELCOME', 
                    sub: 'PLEASE WAIT FOR INSTRUCTIONS', 
                    colorClass: 'mode-standby',
                    nextType: (counts.etFlights > 0) ? 'ET' : 'STD', 
                    nextIdx: 0
                });

                // 2. LEAD IN
                if(leadIn > 0) {
                    schedule.push({ type: 'LEAD_IN', phase: 'READY', duration: leadIn, label: 'GET READY', sub: 'EXAM STARTING SHORTLY', colorClass: 'mode-ready', nextType: (counts.etFlights > 0) ? 'ET' : 'STD', nextIdx: 0 });
                }

                // 3. ET FLIGHTS
                for(let flight = 0; flight < counts.etFlights; flight++) {
                    for(let s = 1; s <= stationsCount; s++) {
                        schedule.push({ type: 'ET', flightIndex: flight, stationNum: s, phase: 'PREP', duration: etPrep, label: 'PREPARATION', sub: `EXTRA TIME FLIGHT ${flight+1} - STATION ${s}`, colorClass: 'mode-et-prep' });
                        schedule.push({ type: 'ET', flightIndex: flight, stationNum: s, phase: 'STATION', duration: etStation, label: 'STATION', sub: `EXTRA TIME FLIGHT ${flight+1} - STATION ${s}`, colorClass: 'mode-et-station' });
                        schedule.push({ type: 'ET', flightIndex: flight, stationNum: s, phase: 'MOVE', duration: baseMove, label: 'MOVE', sub: 'MOVE TO NEXT STATION', colorClass: 'mode-move' });
                    }
                    
                    const hasNextET = (flight + 1 < counts.etFlights);
                    const hasSTD = (counts.stdFlights > 0);
                    
                    if(hasNextET) {
                        schedule.push({ type: 'INTERMISSION', phase: 'PAUSE', duration: 0, label: 'INTERMISSION', sub: 'GET NEXT GROUP READY', colorClass: 'mode-intermission', nextType: 'ET', nextIdx: flight + 1 });
                    } else if(hasSTD) {
                        schedule.push({ type: 'INTERMISSION', phase: 'PAUSE', duration: 0, label: 'INTERMISSION', sub: 'GET NEXT GROUP READY', colorClass: 'mode-intermission', nextType: 'STD', nextIdx: 0 });
                    }
                }

                // 4. STD FLIGHTS
                for(let flight = 0; flight < counts.stdFlights; flight++) {
                    for(let s = 1; s <= stationsCount; s++) {
                        schedule.push({ type: 'STD', flightIndex: flight, stationNum: s, phase: 'PREP', duration: basePrep, label: 'PREPARATION', sub: `STANDARD FLIGHT ${flight+1} - STATION ${s}`, colorClass: 'mode-prep' });
                        schedule.push({ type: 'STD', flightIndex: flight, stationNum: s, phase: 'STATION', duration: baseStation, label: 'STATION', sub: `STANDARD FLIGHT ${flight+1} - STATION ${s}`, colorClass: 'mode-station' });
                        schedule.push({ type: 'STD', flightIndex: flight, stationNum: s, phase: 'MOVE', duration: baseMove, label: 'MOVE', sub: 'MOVE TO NEXT STATION', colorClass: 'mode-move' });
                    }

                    if (flight + 1 < counts.stdFlights) {
                        schedule.push({ type: 'INTERMISSION', phase: 'PAUSE', duration: 0, label: 'INTERMISSION', sub: 'GET NEXT GROUP READY', colorClass: 'mode-intermission', nextType: 'STD', nextIdx: flight + 1 });
                    }
                }

                if (schedule.length === 0) { alert("No students found. Did you paste data?"); return; }
                
                currentStepIndex = 0;
                document.getElementById('setup-view').style.display = 'none';
                document.getElementById('run-view').style.display = 'grid';
                runStep();

            } catch (err) {
                alert("Start Error: " + err.message);
            }
        }

        function runStep() {
            if (currentStepIndex >= schedule.length) { finish(); return; }
            const step = schedule[currentStepIndex];

            // Setup UI
            document.getElementById('status-text').innerText = step.label;
            document.getElementById('info-bar').innerText = step.sub;
            document.getElementById('main-stage-bg').className = 'main-stage ' + step.colorClass;
            
            updateSidebars(step);

            // Handle Manual Pauses
            if (step.type === 'STANDBY' || step.type === 'INTERMISSION') {
                clearInterval(timerInterval);
                document.getElementById('timer').innerText = "--:--";
                document.getElementById('action-btn').style.display = 'inline-block';
                document.getElementById('action-btn').innerText = (step.type === 'STANDBY') ? "BEGIN EXAM" : "START FLIGHT";
                return; 
            }

            // Running Timer
            timeLeft = Math.floor(step.duration);
            document.getElementById('action-btn').style.display = 'none';
            updateTimerDisplay();

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if(!isPaused) {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft < 0) { currentStepIndex++; runStep(); }
                }
            }, 1000);
        }

        function nextSection() { currentStepIndex++; runStep(); }
        function togglePause() { isPaused = !isPaused; document.getElementById('btn-pause').innerText = isPaused ? "Resume" : "Pause"; }
        function stopExam() { clearInterval(timerInterval); document.getElementById('run-view').style.display = 'none'; document.getElementById('setup-view').style.display = 'block'; }

        function updateSidebars(step) {
            let currentList = [];
            let nextList = [];
            const getSlice = (arr, idx) => arr.slice(idx * capacity, (idx * capacity) + capacity);

            if (step.type === 'STANDBY' || step.type === 'LEAD_IN' || step.type === 'INTERMISSION') {
                document.getElementById('lbl-left').innerText = "Get Into Position";
                const type = step.nextType;
                const idx = step.nextIdx;

                if (type === 'ET') {
                    currentList = getSlice(etStudents, idx);
                    const totalET = Math.ceil(etStudents.length / capacity);
                    if (idx + 1 < totalET) nextList = getSlice(etStudents, idx + 1);
                    else nextList = (stdStudents.length > 0) ? getSlice(stdStudents, 0) : [];
                } else {
                    currentList = getSlice(stdStudents, idx);
                    const totalSTD = Math.ceil(stdStudents.length / capacity);
                    if (idx + 1 < totalSTD) nextList = getSlice(stdStudents, idx + 1);
                }
            } else {
                document.getElementById('lbl-left').innerText = "Current Group";
                if (step.type === 'ET') {
                    currentList = getSlice(etStudents, step.flightIndex);
                    const totalET = Math.ceil(etStudents.length / capacity);
                    if (step.flightIndex + 1 < totalET) nextList = getSlice(etStudents, step.flightIndex + 1);
                    else nextList = (stdStudents.length > 0) ? getSlice(stdStudents, 0) : [];
                } else {
                    currentList = getSlice(stdStudents, step.flightIndex);
                    const totalSTD = Math.ceil(stdStudents.length / capacity);
                    if (step.flightIndex + 1 < totalSTD) nextList = getSlice(stdStudents, step.flightIndex + 1);
                }
            }

            renderStudentList('list-current', currentList);
            renderStudentList('list-next', nextList);
        }

        function renderStudentList(elementId, students) {
            const list = document.getElementById(elementId);
            list.innerHTML = '';
            if (!students || students.length === 0) { list.innerHTML = '<li style="color:#555; text-align:center; padding:20px;">-</li>'; return; }
            const sorted = [...students].sort((a, b) => (a.group||"").localeCompare(b.group||""));
            sorted.forEach(s => {
                const li = document.createElement('li');
                let c = "";
                const g = (s.group || "").toLowerCase();
                if(g.includes('red')) c = 'grp-red';
                else if(g.includes('blue')) c = 'grp-blue';
                else if(g.includes('green')) c = 'grp-green';
                else if(g.includes('yellow')) c = 'grp-yellow';
                li.className = `student-item ${c}`;
                li.innerHTML = `<span>${s.name}</span><span class="group-tag">${s.group}</span>`;
                list.appendChild(li);
            });
        }

        function finish() {
            clearInterval(timerInterval);
            document.getElementById('main-stage-bg').className = 'main-stage mode-done';
            document.getElementById('status-text').innerText = "EXAM COMPLETE";
            document.getElementById('timer').innerText = "00:00";
            document.getElementById('info-bar').innerText = "ALL FLIGHTS FINISHED";
            document.getElementById('list-current').innerHTML = '';
            document.getElementById('list-next').innerHTML = '';
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
            const s = (timeLeft % 60).toString().padStart(2,'0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }
    </script>
</body>
</html>